<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <link href="/theme/images/favicon.ico" rel="icon">
        <link href="/theme/css/style.css" rel="stylesheet">
        <title>
            PerlNews.Ru
        </title>
        <link href="/blog/tag/benchmark.atom" rel="alternate" type="application/atom+xml">
        <link href="/blog/tag/benchmark.rss" rel="alternate" type="application/rss+xml">
        <script>
  if (window.location.hostname === "perlnews.ru") {
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

      ga('create', 'UA-59283423-1', 'auto');
      ga('send', 'pageview');
  }
</script>

    </head>
    <body>
        <header>
            <nav class="navbar">
                <div class="container">
                    <a class="brand" href="/">
                        PerlNews.Ru
                        <span class="brand-img"></span>
                    </a>
                    <ul>
                        <li>
                        <a href="/index.html">
                            Новости
                        </a>
                        </li>
                        <li>
                        <a href="/about.html">
                            О блоге
                        </a>
                        </li>
                        <li>
                        <a href="/resources.html">
                            Ресурсы
                        </a>
                        </li>
                        <li>
                        <a href="http://irc.pragmaticperl.com">
                            Чат
                            <span class="typcn typcn-export"></span>
                        </a>
                        </li>
                        <li>
                        <a href="https://twitter.com/perlnews_ru">
                            Twitter
                            <span class="typcn typcn-export"></span>
                        </a>
                        </li>
                    </ul>
                </div>
            </nav>
            
        </header>
        <div class="main container">
            
<div class="row">

    <div class="nine columns">
        <main>

            <article>
                <header>
                    <h1><a href="/blog/2016/05/12/01-perl-5-24-speedup/">Perl 5.24 стал быстрее</a></h1>

                    <p class="tags">Темы:
                        <a href="/blog/tag/perl/" rel="tag">Perl</a>
                        <a href="/blog/tag/benchmark/" rel="tag">benchmark</a>
                    </p>

                    <aside>
                    <p>        
                        <span class="typcn typcn-time"></span>
                        <time datetime="2016-05-12">
                            2016-05-12
                        </time>
                            <span class="typcn typcn-user"></span>
                            perlnews
                        </p>
                    </aside>

                </header>
                <p>Одним из улучшений в Perl 5.24 стало ускорение арифметических операций. Начиная
с Perl 5.8.0, когда появилась поддержка 64-битных целых, скорость
арифметических операций снизилась из-за необходимости проверки различных граничных
условий. Теперь же проверяется общий случай, что снимает необходимость проверки
всех частных случаев, что в целом оптимизирует производительность.</p>

<p>Синан Унур в своей
<a href="https://www.nu42.com/2016/05/switch-to-perl-5-24.html">статье</a>
продемонстрировал, что эта оптимизация даёт выигрыш в 30% по сравнению с
Perl 5.20.2 в бенчмарке
<a href="https://benchmarksgame.alioth.debian.org/u64q/performance.php?test=nbody">nbody</a>,
который использует большое число арифметических операций. Благодаря этому
Perl 5.24 обогнал Python 3 в данном тесте.</p>

                <p class="tags">
                    <a href="/blog/2016/05/12/01-perl-5-24-speedup/#disqus_thread">Комментарии</a>
                </p><p>
                 
                </p>
            </article>
            <article>
                <header>
                    <h1><a href="/blog/2015/05/20/01-perl-microoptimization-tricks.html">Полезные трюки с микрооптимизацией</a></h1>

                    <p class="tags">Темы:
                        <a href="/blog/tag/perl/" rel="tag">Perl</a>
                        <a href="/blog/tag/tips/" rel="tag">tips</a>
                        <a href="/blog/tag/benchmark/" rel="tag">benchmark</a>
                    </p>

                    <aside>
                    <p>        
                        <span class="typcn typcn-time"></span>
                        <time datetime="2015-05-20">
                            2015-05-20
                        </time>
                            <span class="typcn typcn-user"></span>
                            perlnews
                        </p>
                    </aside>

                </header>
                <p>В рассылке perl5-porters был задан
<a href="http://www.nntp.perl.org/group/perl.perl5.porters/2015/05/msg228068.html">вопрос</a>,
почему две операции сильно отличаются по скорости (в пользу <code>do</code>):</p>

<pre><code>do { ; }
{ ; }
</code></pre>

<p><em>Zefram</em>
<a href="http://www.nntp.perl.org/group/perl.perl5.porters/2015/05/msg228069.html">указал</a>
на то, что пустой блок рассматривается как цикл, который выполняется один раз,
и для него формируется фрейм-контекст с поддержкой динамических операций вроде
<code>next</code>. В то время как для <code>do</code> устанавливается только область видимости, что
гораздо быстрее.</p>

<p>Кроме этого было
<a href="http://www.nntp.perl.org/group/perl.perl5.porters/2015/05/msg228074.html">замечено</a>,
что операция <code>;</code> это отдельная операция, которая устанавливает номер строки. В
противовес этому <code>,</code> не имеет подобного оверхеда. Например:</p>

<pre><code>$x = 1; $y = 2; print &quot;$x $y&quot;;
$x = 1, $y = 2, print &quot;$x $y&quot;;
</code></pre>

<p>Оба выражения выполняют одно и то же, но вторая запись будет работать быстрее.</p>

<p>Эта информация сразу вдохновила Питера Рэбиттсона использовать этот простой
трюк на практике. Он продемонстрировал
<a href="https://github.com/dbsrgits/dbix-class/commit/05a5ca4b">коммит</a>, который на
15% увеличивает производительность <code>DBIx::Class</code> просто заменив все <code>;</code> на <code>,</code>
в генерируемом коде для строкового eval. Этот прирост становится заметен на
резалтсетах с ≥1000 рядов.</p>

                <p class="tags">
                    <a href="/blog/2015/05/20/01-perl-microoptimization-tricks.html#disqus_thread">Комментарии</a>
                </p><p>
                 
                </p>
            </article>
            <article>
                <header>
                    <h1><a href="/blog/2015/05/06/01-hash-ordered-benchmark.html">Улучшения в производительности Hash::Ordered</a></h1>

                    <p class="tags">Темы:
                        <a href="/blog/tag/cpan/" rel="tag">CPAN</a>
                        <a href="/blog/tag/benchmark/" rel="tag">benchmark</a>
                    </p>

                    <aside>
                    <p>        
                        <span class="typcn typcn-time"></span>
                        <time datetime="2015-05-06">
                            2015-05-06
                        </time>
                            <span class="typcn typcn-user"></span>
                            perlnews
                        </p>
                    </aside>

                </header>
                <p><a href="https://metacpan.org/pod/Hash::Ordered">Hash::Ordered</a> — это модуль для
создания упорядоченных хешей, ключи в которых хранятся в заданном порядке.
Поскольку модуль написан на чистом Perl, а упорядоченные хеши --- это объекты,
операции над которыми производятся с помощью методов, то подобный хеш работает
медленнее, чем обычный хеш. Такова цена сохранения упорядоченности хеша.</p>

<p>Как
<a href="http://www.dagolden.com/index.php/2461/faster-ordered-hashes-for-perl/">сообщает</a>
Дэвид Голден в новой версии
<a href="https://metacpan.org/release/DAGOLDEN/Hash-Ordered-0.009/">0.009</a> сделана
оптимизация, которая в некоторых случаях значительно ускоряет работу с
упорядоченными хешами. Было проведено сравнение производительности между
версиями Hash::Ordered 0.002 и 0.009. Для наглядности представлен график
сравнения:</p>

<p><img alt="Бенчмарк Hash::Ordered" src="/i/2015-05-06-hash_ordered_benchmark.png"></p>

<p>Виден рост по многим тестам, особенно выросла производительность при удалении в
хеше с большим числом элементов. Практически не изменилась скорость замены
элементов, несколько снизилась скорость добавления (за счёт проверки, что ключ
— это строка, а не ссылка).</p>

                <p class="tags">
                    <a href="/blog/2015/05/06/01-hash-ordered-benchmark.html#disqus_thread">Комментарии</a>
                </p><p>
                 
                </p>
            </article>
        </main>

        <ul class="pager">
            <li class="prev">
                <a class="button disabled" href="" rel="next">
                    <span class="typcn typcn-arrow-left-thick"></span>
                    Раньше
                </a>
            </li>
            <li class="next">
                <a class="button disabled" href="" rel="prev">
                    Позже
                    <span class="typcn typcn-arrow-right-thick"></span>
                </a>
            </li>
        </ul>

    </div>

    <div class="three columns sidebar">
        
        <h1>Темы</h1>
        <ul class="list-inline">
            <li><a href="/blog/tag/aprilfd/">AprilFD</a></li>
            <li><a href="/blog/tag/benchmark/">benchmark</a></li>
            <li><a href="/blog/tag/books/">books</a></li>
            <li><a href="/blog/tag/bug/">bug</a></li>
            <li><a href="/blog/tag/community/">community</a></li>
            <li><a href="/blog/tag/coro/">Coro</a></li>
            <li><a href="/blog/tag/cpan/">CPAN</a></li>
            <li><a href="/blog/tag/cpanpr/">cpanpr</a></li>
            <li><a href="/blog/tag/cpantesters/">cpantesters</a></li>
            <li><a href="/blog/tag/dbic/">DBIC</a></li>
            <li><a href="/blog/tag/donation/">donation</a></li>
            <li><a href="/blog/tag/facepalm/">facepalm</a></li>
            <li><a href="/blog/tag/fork/">fork</a></li>
            <li><a href="/blog/tag/fosdem/">FOSDEM</a></li>
            <li><a href="/blog/tag/funding/">funding</a></li>
            <li><a href="/blog/tag/hackaton/">hackaton</a></li>
            <li><a href="/blog/tag/ide/">IDE</a></li>
            <li><a href="/blog/tag/interview/">interview</a></li>
            <li><a href="/blog/tag/mojo/">mojo</a></li>
            <li><a href="/blog/tag/moscow-pm/">moscow.pm</a></li>
            <li><a href="/blog/tag/perl/">Perl</a></li>
            <li><a href="/blog/tag/perl6/">Perl6</a></li>
            <li><a href="/blog/tag/perlnews-ru/">PerlNews.Ru</a></li>
            <li><a href="/blog/tag/pragmaticperl/">PragmaticPerl</a></li>
            <li><a href="/blog/tag/regexp/">regexp</a></li>
            <li><a href="/blog/tag/security/">security</a></li>
            <li><a href="/blog/tag/smartmatch/">smartmatch</a></li>
            <li><a href="/blog/tag/starwars/">StarWars</a></li>
            <li><a href="/blog/tag/tips/">tips</a></li>
            <li><a href="/blog/tag/unicode/">unicode</a></li>
            <li><a href="/blog/tag/warnings/">warnings</a></li>
            <li><a href="/blog/tag/windows/">windows</a></li>
            <li><a href="/blog/tag/yapc/">YAPC</a></li>
        </ul>
        <h1>Лента</h1>
        <ul class="list-inline">
            <li>
                <span class="typcn typcn-rss"></span>
                <a href="/blog/tag/benchmark.atom" rel="alternate" type="application/atom+xml">
                    Atom
                </a>
            </li>
            <li>
                <span class="typcn typcn-rss"></span>
                <a href="/blog/tag/benchmark.rss" rel="alternate" type="application/rss+xml">
                    RSS
                </a>
            </li>
        </ul>
        <h1>СоцСети</h1>
        <ul class="list-inline">
            <li>
                <a href="https://twitter.com/perlnews_ru"><span class="typcn
                        typcn-social-twitter"></span>PerlNews_RU</a>
            </li>
        </ul>
    </div>

</div>
<script type="text/javascript">
    var disqus_shortname = 'perlnewsru';
    if (window.location.hostname === "perlnews.ru") {
        (function () {
            var s = document.createElement('script'); s.async = true;
            s.type = 'text/javascript';
            s.src = '//' + disqus_shortname + '.disqus.com/count.js';
            (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
        }());
    }
</script>

        </div>
        <footer>
            <div class="container">
<strong>© perlnews.ru</strong>
<p>
Все материалы доступны в соответствии с лицензией
<a href="http://creativecommons.org/licenses/by/4.0/deed.ru">CC BY 4.0</a>
<br>
Работает на
<a href="http://preaction.me/statocles">Statocles</a>
и
<a href="http://www.perl.org">Perl</a>
</p>
</div>

        </footer>
    </body>
</html>
